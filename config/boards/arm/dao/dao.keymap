/*
 * Copyright (c) 2021 Rafael Yumagulov
 * edited by Stefan Badelt
 *
 * SPDX-License-Identifier: MIT
 */

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>

#define DEF 0
#define LWR 1
#define RSE 2

&lt { quick_tap_ms = <200>; };
&mt { quick_tap_ms = <200>; };

/ {
    chosen {
        zmk,matrix_transform = &default_transform;
        // zmk,matrix_transform = &extra_keys_transform;
    };
};

/ {
    keymap {
        compatible = "zmk,keymap";

        default_layer {
            bindings = <
  &mt LALT GRAVE   &kp Q  &kp W  &kp F      &kp P          &kp B            &kp J             &kp L      &kp U      &kp Y       &kp SEMICOLON  &lt 2 BACKSLASH
  &mt LCTRL MINUS  &kp A  &kp R  &kp S      &kp T          &kp G            &kp M             &kp N      &kp E      &kp I       &kp O          &mt RCTRL SQT
  &lt 2 EQUAL      &kp X  &kp C  &kp D      &kp V          &kp Z            &kp K             &kp H      &kp COMMA  &kp PERIOD  &kp SLASH      &kp RALT
                                 &lt 1 TAB  &kp BACKSPACE  &mt LSHFT RET    &mt RSHFT DEL  &kp SPACE  &lt 1 ESCAPE
            >;
        };

        lower_layer {
            bindings = <
  &kp LALT          &kp CARET  &kp NUMBER_7  &kp NUMBER_8  &kp N9         &kp PERCENT    &kp LEFT_PARENTHESIS   &kp LEFT_BRACKET   &kp LEFT_BRACE   &kp AT           &kp PAGE_UP      &kp RIGHT_COMMAND
  &kp LCTRL         &kp ASTRK  &kp N4        &kp NUMBER_5  &kp N6         &kp HASH       &kp LEFT_ARROW         &kp DOWN_ARROW     &kp UP_ARROW     &kp RIGHT_ARROW  &kp EXCLAMATION  &kp RCTRL
  &kp LEFT_COMMAND  &kp N0     &kp NUMBER_1  &kp NUMBER_2  &kp N3         &kp DOLLAR     &kp RIGHT_PARENTHESIS  &kp RIGHT_BRACKET  &kp RIGHT_BRACE  &kp AMPERSAND    &kp PAGE_DOWN    &kp RALT
                                             &trans        &kp BACKSPACE  &kp RET        &kp DEL                &kp SPACE          &trans
            >;
        };

        raise_layer {
            bindings = <
&none       &bootloader       &none          &none          &none          &none          &none          &none          &none          &none          &bootloader  &none         
 &bt BT_CLR    &bt BT_SEL 0   &bt BT_SEL 1   &bt BT_SEL 2   &bt BT_SEL 3   &bt BT_SEL 4   &bt BT_SEL 4   &bt BT_SEL 3   &bt BT_SEL 2   &bt BT_SEL 1   &bt BT_SEL 0   &bt BT_CLR
 &none        &sys_reset       &none          &none          &none          &none          &none          &none          &none          &none      &sys_reset     &none
                            &kp TAB  &kp BACKSPACE  &mt LSHFT RET    &mt RSHFT DEL  &kp SPACE  &kp ESCAPE
            >;
        };
    };
};
